{% extends 'base.html' %}

{% block title %}{{ question.title }} - QuizQuest{% endblock %}

{% block content %}
<div class="mb-4">
    <a href="{% url 'question_list' %}" class="btn btn-outline-secondary">&larr; Back to Questions</a>
</div>

<div class="card">
    <div class="card-header d-flex justify-content-between align-items-center">
        <h4 class="mb-0">{{ question.title }}</h4>
        {% if user.is_admin %}
        <div>
            <a href="{% url 'question_update' question.pk %}" class="btn btn-sm btn-outline-primary">Edit</a>
            <a href="{% url 'question_delete' question.pk %}" class="btn btn-sm btn-outline-danger">Delete</a>
        </div>
        {% endif %}
    </div>
    <div class="card-body">
        <div class="mb-3">
            <span class="badge bg-info">{{ question.difficulty }}</span>
            {% if question.category %}
            <span class="badge bg-secondary">{{ question.category }}</span>
            {% endif %}
        </div>
        
        {% if question.image %}
        <div class="mb-3">
            <img src="{{ question.image.url }}" alt="Question Image" class="img-fluid rounded" style="max-height: 300px;">
        </div>
        {% endif %}
        
        <h5>Question:</h5>
        <p class="lead">{{ question.content }}</p>
        
        <h5>Options:</h5>
        <ul class="list-group mb-3">
            <li class="list-group-item {% if question.correct_answer == 'A' %}list-group-item-success{% endif %}">
                <strong>A:</strong> {{ question.option_a }}
                {% if question.correct_answer == 'A' %}<span class="badge bg-success float-end">Correct Answer</span>{% endif %}
            </li>
            <li class="list-group-item {% if question.correct_answer == 'B' %}list-group-item-success{% endif %}">
                <strong>B:</strong> {{ question.option_b }}
                {% if question.correct_answer == 'B' %}<span class="badge bg-success float-end">Correct Answer</span>{% endif %}
            </li>
            <li class="list-group-item {% if question.correct_answer == 'C' %}list-group-item-success{% endif %}">
                <strong>C:</strong> {{ question.option_c }}
                {% if question.correct_answer == 'C' %}<span class="badge bg-success float-end">Correct Answer</span>{% endif %}
            </li>
            <li class="list-group-item {% if question.correct_answer == 'D' %}list-group-item-success{% endif %}">
                <strong>D:</strong> {{ question.option_d }}
                {% if question.correct_answer == 'D' %}<span class="badge bg-success float-end">Correct Answer</span>{% endif %}
            </li>
        </ul>
    </div>
    <div class="card-footer text-muted">
        <small>Created by {{ question.created_by.username|default:"Unknown" }} on {{ question.created_at|date:"M d, Y H:i" }}</small>
    </div>
</div>
{% endblock %}
